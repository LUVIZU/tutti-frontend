<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Í≤åÏãúÎ¨º ÏÉÅÏÑ∏ ÌéòÏù¥ÏßÄ</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      .blur-circle {
        position: absolute;
        border-radius: 50%;
        pointer-events: none;
        z-index: 0;
      }

      .header,
      .wrapper,
      .sidebar,
      .content {
        position: relative;
        z-index: 10;
      }

      .blur-circle-1 {
        width: 783px;
        height: 783px;
        background: #ddf2ff;
        top: 100px;
        left: 50%;
        transform: translateX(-50%);
        filter: blur(500px);
        opacity: 1;
      }

      .blur-circle-2 {
        width: 507px;
        height: 507px;
        background: #b0dcf7;
        top: 240px;
        left: 60%;
        transform: translateX(-50%);
        filter: blur(250px);
        opacity: 0.2;
      }

      .logo img {
        width: 128px;
        height: 52px;
      }

      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        padding-top: 100px;
      }

      .wrapper {
        width: 90vw;
        max-width: 1280px;
        padding-top: 20px;
        display: flex;
        flex-direction: row;
        gap: 0;
      }

      .header {
        position: absolute;
        top: 10px;
        left: 0;
        width: 100%;
        height: 80px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 5vw;
        z-index: 1000;
      }

      .header .user-actions {
        display: flex;
        align-items: center;
        width: auto;
        height: 42px;
        gap: 14px;
      }

      .nav-box {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 37px;
        padding: 10px 14px;
        font-family: "Inter", sans-serif;
        font-size: 20px;
        font-weight: 500;
        border-right: 1px solid #e1e1e1;
        position: relative;
        background-color: #f9f9f9;
      }

      .notification {
        position: relative;
      }

      .badge {
        position: absolute;
        top: -6px;
        right: -6px;
        width: 18px;
        height: 18px;
        background: #ff3b3b;
        color: white;
        font-size: 12px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .profile-btn {
        width: 37px;
        height: 37px;
        border: 1px solid #247eb6;
        border-radius: 1000px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        background: white;
      }

      .profile-btn img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .sidebar {
        width: 280px;
        height: auto;
        padding: 2px;
        background-color: white;
        border-top: 5px solid #247eb6;
        flex-shrink: 0;
        flex-grow: 0;
      }

      .sidebar h2 {
        color: #247eb6;
        font-family: "Inter", sans-serif;
        font-weight: 700;
        font-size: 36px;
        margin-top: 30px;
        text-align: center;
      }

      .stats {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 10.67px;
        margin-top: 15px;
      }

      .stat-item {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 16px;
        color: #000;
      }

      .stat-item img.user-icon {
        width: 26.27px;
        height: 20.3px;
      }

      .stat-item img.calendar-icon {
        width: 18.67px;
        height: 18.67px;
      }

      .stat-item img.day-icon {
        width: 13.33px;
        height: 17px;
      }

      .write-button {
        margin: 20px auto;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 200px;
        height: 40px;
        background-color: #b0dcf7;
        border-radius: 21.02px;
        gap: 7.01px;
        color: white;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
      }

      .write-button img {
        width: 18px;
        height: 18px;
      }

      .sidebar ul {
        list-style: none;
        margin-top: 20px;
        padding: 0 15px;
      }

      .sidebar li {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        margin-bottom: 10px;
        border-radius: 8px;
        cursor: pointer;
      }

      .sidebar li.active {
        background-color: #e6f4fd;
      }

      .sidebar li.active span {
        color: #247eb6;
        font-weight: 600;
      }

      .icon-all {
        width: 26px;
        height: 26px;
      }
      .icon-star {
        width: 27px;
        height: 26px;
      }
      .icon-info {
        width: 27px;
        height: 26px;
      }
      .icon-group {
        width: 37px;
        height: 26px;
      }
      .icon-mission {
        width: 20.8px;
        height: 26px;
      }
      .icon-calendar {
        width: 26px;
        height: 26px;
      }

      .content {
        flex: 1;
        padding-left: 30px;
        display: flex;
        flex-direction: column;
      }

      .post-detail {
        background-color: #ffffff;
        border-radius: 15px;
        padding: 25px 40px;
        width: 100%;
        min-height: 450px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        margin-bottom: 20px;
      }

      .post-header {
        font-size: 16px;
        color: #a0a0a0;
        margin-bottom: 15px;
        padding-bottom: 0px;
        border-bottom: none;
      }

      .post-header a {
        color: #a0a0a0;
        text-decoration: none;
      }

      .post-header a span {
        color: #247eb6;
      }

      .post-title {
        font-family: "Inter", sans-serif;
        font-size: 32px;
        font-weight: 600;
        color: #000;
        margin-bottom: 20px;
        line-height: 1.4;
      }

      .post-meta {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 30px;
        font-size: 16px;
        color: #888;
      }

      .post-meta .profile-and-text {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .post-meta .text-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 5px;
      }

      .post-meta span#post-writer {
        font-weight: 600;
        font-size: 18px;
        line-height: 1.2;
      }

      .post-meta span#post-date {
        font-weight: 400;
        font-size: 16px;
        line-height: 1.2;
        color: #939393;
      }

      .meta-and-line {
        border-bottom: 2.06px solid #e1e1e1;
        margin-bottom: 30px;
      }

      .profile-img-small {
        width: 58px;
        height: 58px;
        border-radius: 50%;
        background-color: #b0dcf7;
        overflow: hidden;
        flex-shrink: 0;
      }

      .profile-img-small img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .post-content {
        font-size: 18px;
        color: #000;
        line-height: 1.7;
        text-align: center;
        padding-left: 0;
        padding-right: 0;
        flex-grow: 1;
      }

      .post-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 60px;
        margin-top: 30px;
      }

      .post-actions .left-actions {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .post-actions .right-actions {
        display: flex;
        align-items: center;
      }

      .action-item {
        display: flex;
        align-items: center;
        cursor: pointer;
        font-size: 16px;
        color: #555;
        gap: 5px;
      }

      .action-item .heart-icon {
        width: 35px;
        height: 32px;
      }

      .action-item .comment-icon {
        width: 37px;
        height: 31px;
      }

      .action-item .bookmark-icon {
        width: 26px;
        height: 35px;
        transition: transform 0.2s ease-in-out;
      }

      .comments-section {
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: 100%;
      }

      .comment-input-area {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-top: 10px;
        padding: 0 80px;
        padding-bottom: 30px;
      }

      .comment-input-area .profile-img-small {
        flex-shrink: 0;
        width: 48px;
        height: 48px;
      }

      .comment-input-area input {
        flex-grow: 1;
        padding: 10px 12px;
        border: 1px solid #e1e1e1;
        border-radius: 8px;
        font-size: 15px;
        outline: none;
        height: 60px;
      }

      .comment-input-area input::placeholder {
        color: #c6c6c6;
      }

      .comment-input-area button {
        padding: 10px 18px;
        background-color: #f0f9ff;
        color: #247eb6;
        border: none;
        border-radius: 8px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        flex-shrink: 0;
      }

      .comment-input-area button:hover {
        background-color: #1a6096;
      }

      .comments-list {
        display: flex;
        flex-direction: column;
        gap: 0;
        padding-top: 0px;
      }

      .comment-item {
        display: flex;
        gap: 15px;
        align-items: flex-start;
        padding: 0px;
        border-bottom: none;
        background-color: transparent;
      }

      .comment-item:first-child {
        padding: 10px 0;
      }

      .comment-item:last-child {
        border-bottom: none;
        padding-bottom: 0;
      }

      .reply-comment-item {
        margin-left: 40px;
        padding-left: 0;
        background-color: transparent;
        border: none;
      }

      .reply-comment-item + .reply-comment-item {
        border-top: none !important; /* ÏúÑ ÎãµÍ∏ÄÍ≥ºÏùò ÏÑ† Ï†úÍ±∞ */
        margin-top: 0px;
      }

      .reply-arrow-image {
        width: 16px;
        height: 16px;
        margin-top: 6px;
        flex-shrink: 0;
      }

      .reply-comment-item .profile-img-small {
        width: 36px;
        height: 36px;
        flex-shrink: 0;
        margin-top: 4px;
        z-index: 2;
      }

      .reply-comment-item .comment-content-area {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        position: relative;
        margin-left: 10px;
      }

      .comment-group {
        background-color: white;
        border-radius: 20px;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
        padding: 20px 30px;
        margin-bottom: 0px;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .comment-item .profile-img-small {
        flex-shrink: 0;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        margin-left: 0;
        margin-top: 4px;
      }

      .comment-content-area {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        position: relative;
      }

      .comment-meta {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 4px;
        font-size: 14px;
        justify-content: space-between;
      }

      .comment-meta .user-info {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .comment-meta .comment-author {
        font-weight: 600;
        color: #000;
      }

      .comment-info-actions {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 13px;
        color: #939393;
        margin-top: 8px;
        margin-bottom: 0px;
      }

      .comment-text {
        font-size: 15px;
        color: #333;
        line-height: 1.6;
        white-space: pre-line;
        margin-bottom: 0px;
      }

      .comment-date {
        color: #939393;
        font-size: 13px;
        white-space: nowrap;
      }

      .reply-button {
        background: none;
        border: none;
        color: #a0a0a0;
        font-size: 13px;
        cursor: pointer;
        padding: 0;
        text-decoration: none;
      }

      .reply-button:hover {
        text-decoration: underline;
      }

      .comment-like-button {
        display: flex;
        align-items: center;
        gap: 5px;
        color: #555;
        font-size: 14px;
        cursor: pointer;
        border: none;
        background: none;
        padding: 0;
      }

      .comment-like-icon {
        width: 18px;
        height: 16px;
      }

      .reply-input-area {
        display: flex;
        align-items: flex-start;
        padding: 10px 40px 10px 180px;
        background-color: white;
        border-bottom: 1px solid #eee;
        border-radius: 0 0 20px 20px;
        margin-top: 0px;
      }

      .reply-input-area .profile-img-small {
        width: 36px;
        height: 36px;
        flex-shrink: 0;
        margin-top: 4px;
      }

      .reply-input-area .reply-input-content {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-left: 0;
      }

      .reply-input-content input {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #e1e1e1;
        border-radius: 8px;
        font-size: 15px;
        outline: none;
      }

      .reply-input-content input::placeholder {
        color: #b0b0b0;
      }

      .reply-buttons {
        display: flex;
        justify-content: flex-end;
        gap: 8px;
      }

      .reply-buttons button {
        padding: 8px 15px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        border: 1px solid #e1e1e1;
      }

      .reply-buttons .submit-reply {
        background-color: #247eb6;
        color: white;
        border-color: #247eb6;
      }

      .reply-buttons .cancel-reply {
        background-color: white;
        color: #555;
      }

      .reply-comment-item {
        margin-left: 40px;
        padding-left: 25px;
        position: relative;
      }

      .reply-arrow-image {
        position: absolute;
        left: -20px;
        top: 14px;
        width: 20px;
        height: 20px;
      }
    </style>
  </head>

  <body>
    <div class="blur-circle blur-circle-1"></div>
    <div class="blur-circle blur-circle-2"></div>
    <div class="header">
      <div class="logo">
        <img src="./icons/tutti.png" alt="Tutti Î°úÍ≥†" />
      </div>
      <div class="user-actions">
        <div class="nav-box">Ìôà</div>
        <div class="nav-box notification">
          ÏïåÎ¶º
          <span class="badge">0</span>
        </div>
        <div class="profile-btn">
          <img id="profileImage" src="./icons/profile.png" alt="ÌîÑÎ°úÌïÑ" />
        </div>
      </div>
    </div>

    <div class="wrapper">
      <div class="sidebar">
        <h2>TOEIC Ïª§ÎÆ§ÎãàÌã∞</h2>
        <div class="stats">
          <div class="stat-item">
            <img src="./icons/user.png" class="user-icon" alt="Ïú†Ï†Ä ÏïÑÏù¥ÏΩò" />
            <span>00Î™Ö</span>
          </div>
          <div class="stat-item">
            <img
              src="./icons/calendar-blue.png"
              class="calendar-icon"
              alt="Îã¨Î†• ÏïÑÏù¥ÏΩò"
            />
            <span>0/00</span>
          </div>
          <div class="stat-item">
            <img src="./icons/day.png" class="day-icon" alt="D-day ÏïÑÏù¥ÏΩò" />
            <span>-61</span>
          </div>
        </div>

        <div class="write-button">
          <img src="./icons/pencil.png" alt="Í∏ÄÏì∞Í∏∞ ÏïÑÏù¥ÏΩò" />
          <span>Í∏ÄÏì∞Í∏∞</span>
        </div>

        <ul id="menu-list">
          <li data-title="Ï†ÑÏ≤¥Í∏Ä" data-icon="all">
            <img src="./icons/all-gray.png" class="icon-all" />
            <span>Ï†ÑÏ≤¥Í∏Ä</span>
          </li>
          <li data-title="Ïù∏Í∏∞Í∏Ä" data-icon="star">
            <img src="./icons/star-gray.png" class="icon-star" />
            <span>Ïù∏Í∏∞Í∏Ä</span>
          </li>
          <li data-title="Ï†ïÎ≥¥Í∏Ä" data-icon="info" class="active">
            <img src="./icons/info-blue.png" class="icon-info" />
            <span>Ï†ïÎ≥¥Í∏Ä</span>
          </li>
          <li data-title="Ïä§ÌÑ∞Îîî Î™®Ïßë" data-icon="group">
            <img src="./icons/group-gray.png" class="icon-group" />
            <span>Ïä§ÌÑ∞Îîî Î™®Ïßë</span>
          </li>
          <li data-title="ÎØ∏ÏÖò" data-icon="mission">
            <img src="./icons/mission-gray.png" class="icon-mission" />
            <span>ÎØ∏ÏÖò</span>
          </li>
          <li data-title="ÏãúÌóò ÏùºÏ†ï" data-icon="calendar">
            <img src="./icons/calendar-gray.png" class="icon-calendar" />
            <span>ÏãúÌóò ÏùºÏ†ï</span>
          </li>
        </ul>
      </div>

      <div class="content">
        <div class="post-detail">
          <div class="post-header">
            <a href="community.html">Ï†ÑÏ≤¥Í∏Ä</a> &gt;
            <a href="#" id="post-type-link"
              ><span id="post-type">ÏµúÏã†Í∏Ä</span></a
            >
          </div>
          <div class="post-title" id="post-title">Î°úÎî© Ï§ë...</div>
          <div class="meta-and-line">
            <div class="post-meta">
              <div class="profile-and-text">
                <div class="profile-img-small">
                  <img src="./icons/profile.png" alt="ÏûëÏÑ±Ïûê ÌîÑÎ°úÌïÑ" />
                </div>
                <div class="text-container">
                  <span id="post-writer"></span>
                  <span id="post-date"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="post-content" id="post-content">
            Í≤åÏãúÎ¨º ÎÇ¥Ïö©ÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ëÏûÖÎãàÎã§.
          </div>

          <div class="post-actions">
            <div class="left-actions">
              <div class="action-item" id="like-button">
                <img
                  src="./icons/heart-gray.png"
                  alt="Ï¢ãÏïÑÏöî"
                  id="like-icon"
                  class="heart-icon"
                />
                <span id="like-count">0</span>
              </div>
              <div class="action-item">
                <img
                  src="./icons/comment.png"
                  alt="ÎåìÍ∏Ä"
                  class="comment-icon"
                />
                <span id="comment-count">0</span>
              </div>
            </div>

            <div class="right-actions">
              <div class="action-item" id="bookmark-button">
                <img
                  src="./icons/saved-white.png"
                  alt="Ïä§ÌÅ¨Îû©"
                  id="bookmark-icon"
                  class="bookmark-icon"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="comments-section">
          <div class="comments-list" id="comments-list"></div>
          <div class="comment-input-area">
            <div class="profile-img-small">
              <img
                id="myProfileImage"
                src="./icons/profile.png"
                alt="ÎÇ¥ ÌîÑÎ°úÌïÑ"
              />
            </div>
            <input
              type="text"
              id="comment-input"
              placeholder="ÎåìÍ∏ÄÏùÑ ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî..."
            />
            <button id="submit-comment">Îì±Î°ù</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      const currentUserName = sessionStorage.getItem("userName") || "ÏùµÎ™Ö";

      const postData = {
        1: {
          title: "ÌÜ†Ïùµ LCÎßå Ïò¨Î¶¨Îäî Î≤ï ÏïÑÏãúÎäî Î∂Ñ Í≥ÑÏã†Í∞ÄÏöî„Ö†„Ö†",
          writer: "ÏóòÎπÑÏóêÌîÑ",
          date: "2025ÎÖÑ 6Ïõî 24Ïùº Ïò§ÌõÑ 12:31",
          content:
            "LCÎßå Îî∞Î°ú Ïò¨Î¶¨Îäî Î∞©Î≤ïÏóê ÎåÄÌï¥ Í≥†ÎØºÏù¥ ÎßéÏïòÎäîÎç∞ ÌòπÏãú ÏïÑÏãúÎäî Î∂Ñ Í≥ÑÏãúÎ©¥ Í≥µÏú†Ìï¥Ï£ºÏÑ∏Ïöî.\\nÏ†ïÌôïÌïú Î∞©Î≤ïÏù¥ ÏûàÎã§Î©¥ ÎèÑÏõÄÏù¥ Îê† Í≤É Í∞ôÏïÑÏöî!\\nÍ∞êÏÇ¨Ìï©ÎãàÎã§.",
          category: "Ï†ïÎ≥¥Í∏Ä",
          likes: 5,
          comments: [
            {
              id: 101,
              author: "ÌñÑÌÜ†Î¶¨",
              text: "Ìä∏Î¶¨ÌîåÏßÄÎ¨∏ÍπåÏßÄ ÏãúÍ∞Ñ ÎÇ®Í∏∞Îäî Í≤å Ï†ú ÍøàÏù∏Îç∞... ÏàúÏÑú Î∞îÍøîÏÑú Íº≠ Ìï¥Î≥ºÍ≤åÏöî Í∞êÏÇ¨Ìï©ÎãàÎã§!",
              date: "2025ÎÖÑ 6Ïõî 24Ïùº Ïò§ÌõÑ 1:00",
              likes: 3,
              parentId: null,
            },
            {
              id: 102,
              author: "ÏÇºÏÇºÏò•Ïàò",
              text: "ÏßÑÏßú Í≥µÍ∞êÎèºÏöî„Ö†„Ö† Ï†ÄÎèÑ Îß®ÎÇ† Ìä∏Î¶¨ÌîåÏóêÏÑú ÏãúÍ∞Ñ Î∂ÄÏ°±ÌñàÎäîÎç∞ Ïù¥ ÏàúÏÑú Íæ∏Ï§ÄÌûà Ïó∞ÏäµÌïòÎãàÍπå Ï†êÏàò ÎßéÏù¥ Ïò¨ÎùºÍ∞ÄÎçîÎùºÍ≥†Ïöî! Íº≠ Ìï¥Î≥¥ÏÑ∏Ïöîüôè",
              date: "2025ÎÖÑ 6Ïõî 24Ïùº Ïò§ÌõÑ 1:30",
              likes: 1,
              parentId: null,
            },
            {
              id: 103,
              author: "ÏßÑÏù¥",
              text: "ÌååÌä∏ 5, 6 Î∞îÎ°ú Ïó∞Í≤∞ÌïòÎäî Í±∞ ÍøÄÌåÅ... Ï†Ä Í∑∏Í±∞ Ïïà ÌïòÎã§Í∞Ä ÌïúÎ≤à ÌùêÎ¶Ñ ÎÅäÍ≤ºÏóàÏñ¥Ïöî „Öã„Öã„Öã",
              date: "2025ÎÖÑ 6Ïõî 24Ïùº Ïò§ÌõÑ 2:00",
              likes: 0,
              parentId: null,
            },
            {
              id: 104,
              author: "ÏÇºÏÇºÏò•Ïàò",
              text: "ÎßûÏïÑÏöî! ÌååÌä∏ 5 ÎÅùÎÇ¥Í≥† Î∞îÎ°ú 6 Ïó∞Í≤∞Ìï¥Ïïº ÏßëÏ§ë Ïûò Ïú†ÏßÄÎêòÎäî ÎìØ... Ï§ëÍ∞ÑÏóê ÌååÌä∏ 7 Í∞îÎã§Í∞Ä Îã§Ïãú ÎèåÏïÑÏò§Î©¥ Îçî Ìó∑Í∞àÎ¶¨ÎçîÎùºÍ≥†Ïöî „Öã„Öã„Öã",
              date: "2025ÎÖÑ 6Ïõî 24Ïùº Ïò§ÌõÑ 2:30",
              likes: 1,
              parentId: null,
            },
          ],
        },
        2: {
          title: "RC ÏãúÍ∞Ñ Î∂ÄÏ°±ÌïúÎ∂ÑÎì§Íªò Ï†úÍ∞Ä Ïì¥ Î¨∏Ï†úÌíÄÏù¥ ÏàúÏÑú ÌåÅ Í≥µÏú†Ìï¥Ïöî",
          writer: "ÏÇºÏÇºÏò•Ïàò",
          date: "2025ÎÖÑ 6Ïõî 24Ïùº Ïò§ÌõÑ 12:31",
          content:
            "ÏïàÎÖïÌïòÏÑ∏Ïöî!\\n\\nÏöîÏ¶ò RC ÌíÄÎã§Í∞Ä Îäò ÏãúÍ∞ÑÎ™®ÏûêÎùºÏÑú Ï¢åÏ†àÌïòÏãúÎäîÎ∂ÑÎì§ ÎßéÏúºÏã§Í≤ÉÍ∞ôÏïÑ, Ï†ÄÎèÑ ÌïúÎïå ÎòëÍ∞ôÏù¥ Í≥†ÏÉùÌñàÎçò Í≤ΩÌóòÏúºÎ°ú Ï†ÄÎßåÏùò ÌíÄÏù¥ ÏàúÏÑúÏôÄ ÌåÅ Í≥µÏú†Ìï¥Î¥ÖÎãàÎã§. ÌäπÌûà ÌååÌä∏ 7 Ìä∏Î¶¨Ìîå ÏßÄÎ¨∏ÏóêÏÑú ÏãúÍ∞Ñ Îã§ Ïì∞Í≥† Î©òÎ∂ï Ïò§Îäî Í±∞ ÏßÑÏßú ÎßéÏïòÏóàÍ±∞Îì†Ïöî...ü•≤\\n\\nÏ†ÄÎèÑ ÏõêÎûò ÏàúÏÑúÎåÄÎ°ú ÌíÄÎã§Í∞Ä Ìï≠ÏÉÅ ÏãúÍ∞Ñ Î∂ÄÏ°±ÌñàÎäîÎç∞, ÌíÄÏù¥ ÏàúÏÑú Î∞îÍæ∏Í≥† ÎÇòÏÑú ÌååÌä∏ 7 Ìä∏Î¶¨Ìîå ÏßÄÎ¨∏ÍπåÏßÄ ÏãúÍ∞Ñ ÎÇ®Í∏∞Í≥† ÎßàÎ¨¥Î¶¨ Í∞ÄÎä•Ìï¥Ï°åÏñ¥Ïöî! Ïã§Ï†úÎ°ú 3Ï£º Ïó∞ÏäµÌñàÎäîÎç∞ RC Ï†êÏàò 70Ï†ê Ï†ïÎèÑ Ïò¨ÎûêÏäµÎãàÎã§.\\n\\nüïê Ï†úÍ∞Ä Ï∂îÏ≤úÌïòÎäî RC Î¨∏Ï†ú ÌíÄÏù¥ ÏàúÏÑú & ÌåÅ\\n‚úîÔ∏è 1. ÌååÌä∏ 5 (Î¨∏Î≤ï/Ïñ¥Ìúò ÎπàÏπ∏)\\nÍ∞ÄÏû• Îπ†Î•¥Í≥† ÏßÅÍ¥ÄÏ†ÅÏúºÎ°ú ÌíÄ Ïàò ÏûàÏñ¥ÏÑú Ï¥àÎ∞òÏóê ÏãúÍ∞Ñ ÏïÑÎÅºÍ∏∞\\nÍ≥†ÎØºÎêòÎäî Î¨∏Ï†ú Î∞îÎ°ú Ï≤¥ÌÅ¨ÌïòÍ≥† ÎÑòÏñ¥Í∞ÄÍ∏∞\\n\\n‚úîÔ∏è 2. ÌååÌä∏ 6 (Î¨∏Ïû• ÏÇΩÏûÖ/ÎπàÏπ∏)\\nÌååÌä∏ 5 ÌùêÎ¶Ñ Ïù¥Ïñ¥ÏÑú ÏßëÏ§ëÎ†• ÏÇ¥Î¶¨Í∏∞\\nÏßÄÎ¨∏ Í∏∏Ïù¥Í∞Ä Í∏∏ÏßÄ ÏïäÏúºÎãà Îπ†Î•¥Í≤å Ï†ÑÏ≤¥ ÏùΩÍ≥† Ìï¥Í≤∞\\n\\n‚úîÔ∏è 3. ÌååÌä∏ 7 - Ïã±Í∏Ä ÏßÄÎ¨∏ Î®ºÏ†Ä)\\nÏÉÅÎåÄÏ†ÅÏúºÎ°ú ÏßßÍ≥† ÍπîÎÅîÌïú Î¨∏Ï†úÎ∂ÄÌÑ∞ ÏãúÍ∞Ñ Îã®Ï∂ï\\nÎ¨∏Ï†ú Î®ºÏ†Ä ÏùΩÍ≥† ÌïµÏã¨ ÌÇ§ÏõåÎìú ÏúÑÏ£ºÎ°ú ÏßÄÎ¨∏ Ïä§Ï∫î\\n\\n‚úîÔ∏è 4. ÌååÌä∏ 7 - ÎçîÎ∏î ‚Üí Ìä∏Î¶¨Ìîå ÏàúÏÑú)\\nÏßÄÎ¨∏Ïù¥ Í∏¥ ÎßåÌÅº Ï≤¥Î†• ÎÇ®ÏïòÏùÑ Îïå Î™∞ÏïÑÏÑú ÏßëÏ§ë\\nÌä∏Î¶¨Ìîå ÏßÄÎ¨∏ÏùÄ ÎßàÏßÄÎßâÍπåÏßÄ ÏãúÍ∞ÑÏù¥ ÎÇ®ÏùÑ Ïàò ÏûàÎèÑÎ°ù ÏïûÎ∂ÄÎ∂Ñ ÏïÑÎÅºÍ∏∞\\n\\n\\nÏ†ÄÎäî Ïù¥Î†áÍ≤å Î∞îÍæº ÌõÑÎ°ú ÌååÌä∏ 7 Ìä∏Î¶¨Ìîå ÏßÄÎ¨∏ ÌíÄ Îïå ÏãúÍ∞Ñ ÏïïÎ∞ï Ìôï Ï§ÑÏóàÍ≥†, ÏßëÏ§ëÎèÑÎèÑ Ìõ®Ïî¨ Ï¢ãÏïÑÏ°åÏñ¥Ïöî. ÌòπÏãú Îã§Î•∏ Î∂ÑÎì§ÏùÄ Ïñ¥Îñ§ ÏàúÏÑúÎ°ú Ìë∏ÏãúÎäîÏßÄÎèÑ Í≥µÏú†Ìï¥Ï£ºÏãúÎ©¥ Ï¢ãÏùÑ Í≤É Í∞ôÏïÑÏöî üòä\\nÎã§Îì§ Í≥†ÎìùÏ†ê Í∞ÄÏ¶àÏïÑ!! üí™üî•",
          category: "Ï†ïÎ≥¥Í∏Ä",
          likes: 12,
          comments: [
            {
              id: 201,
              author: "ÎØ∏ÎãàÎØ∏Îãà",
              text: "Ï†ÄÎèÑ Ïù¥ Î∞©Î≤ï Ïç®Î¥êÏïºÍ≤†Ïñ¥Ïöî! Í∞êÏÇ¨Ìï©ÎãàÎã§.",
              date: "2025ÎÖÑ 6Ïõî 24Ïùº Ïò§ÌõÑ 1:05",
              likes: 2,
              parentId: null,
            },
            {
              id: 202,
              author: "ÌÜ†Î¶∞Ïù¥",
              text: "ÍøÄÌåÅ Í∞êÏÇ¨Ìï©ÎãàÎã§ „Ö†„Ö†",
              date: "2025ÎÖÑ 6Ïõî 24Ïùº Ïò§ÌõÑ 1:10",
              likes: 0,
              parentId: null,
            },
            {
              id: 203,
              author: "ÎåìÍ∏ÄÏùò ÎãµÍ∏Ä",
              text: "Ï†ÄÎèÑ Í∑∏Î†áÍ≤å ÏÉùÍ∞ÅÌï¥Ïöî!",
              date: "2025ÎÖÑ 6Ïõî 24Ïùº Ïò§ÌõÑ 1:15",
              likes: 0,
              parentId: 201,
            },
            {
              id: 204,
              author: "ÎåìÍ∏ÄÏùò ÎãµÍ∏Ä 2",
              text: "ÎÑ§ Ï†ïÎßê Ïú†Ïö©Ìï©ÎãàÎã§.",
              date: "2025ÎÖÑ 6Ïõî 24Ïùº Ïò§ÌõÑ 1:20",
              likes: 0,
              parentId: 201,
            },
          ],
        },
        3: {
          title: "Ïä§ÌÑ∞ÎîîÏõê Î™®ÏßëÌï©ÎãàÎã§! 800Ï†êÎåÄ Î™©Ìëú",
          writer: "Ïä§ÌÑ∞ÎîîÏû•",
          date: "2025ÎÖÑ 7Ïõî 5Ïùº Ïò§ÌõÑ 3:00",
          content:
            "800Ï†êÎåÄ Î™©ÌëúÎ°ú Ï£º 2Ìöå Ïä§ÌÑ∞Îîî ÌïòÏã§ Î∂Ñ Î™®ÏßëÌï©ÎãàÎã§. Ïû•ÏÜåÎäî Í∞ïÎÇ®Ïó≠ Ïù∏Í∑º Ïä§ÌÑ∞ÎîîÎ£∏ÏûÖÎãàÎã§.",
          category: "Ïä§ÌÑ∞Îîî Î™®Ïßë",
          likes: 3,
          comments: [],
        },
      };

      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");
      let currentPost;
      let commentLikes = {};

      function updateActionCounts(post) {
        document.getElementById("like-count").innerText = post.likes;
        document.getElementById("comment-count").innerText =
          post.comments.length;
      }

      function renderComments(comments) {
        const commentsList = document.getElementById("comments-list");
        commentsList.innerHTML = "";

        const topLevelComments = comments.filter((c) => c.parentId === null);

        topLevelComments.forEach((mainComment) => {
          // üîµ 1. ÎåìÍ∏Ä Í∑∏Î£π Î∞ïÏä§
          const commentGroup = document.createElement("div");
          commentGroup.classList.add("comment-group");

          // üîµ 2. ÎåìÍ∏Ä ÏöîÏÜå ÏÉùÏÑ±
          const mainCommentItem = document.createElement("div");
          mainCommentItem.classList.add("comment-item");
          mainCommentItem.dataset.commentId = mainComment.id;

          const isMainCommentLiked = commentLikes.hasOwnProperty(mainComment.id)
            ? commentLikes[mainComment.id]
            : false;
          const mainLikeIconSrc = isMainCommentLiked
            ? "./icons/heart-blue.png"
            : "./icons/heart-gray.png";

          mainCommentItem.innerHTML = `
      <div class="profile-img-small">
        <img src="./icons/profile.png" alt="ÌîÑÎ°úÌïÑ" />
      </div>
      <div class="comment-content-area">
        <div class="comment-meta">
          <div class="user-info">
            <span class="comment-author">${mainComment.author}</span>
          </div>
          <button class="comment-like-button" data-comment-id="${
            mainComment.id
          }">
            <img src="${mainLikeIconSrc}" alt="Ï¢ãÏïÑÏöî" class="comment-like-icon" />
            <span class="comment-like-count">${mainComment.likes || 0}</span>
          </button>
        </div>
        <div class="comment-text">${mainComment.text.replace(
          /\n/g,
          "<br>"
        )}</div>
        <div class="comment-info-actions">
          <span class="comment-date">${mainComment.date}</span>
          <button class="reply-button" data-comment-id="${
            mainComment.id
          }">ÎãµÍ∏ÄÎã¨Í∏∞</button>
        </div>
      </div>
    `;

          commentGroup.appendChild(mainCommentItem);

          // üîµ 3. ÎãµÍ∏ÄÎì§ Ï∂îÍ∞Ä
          comments
            .filter((c) => c.parentId === mainComment.id)
            .forEach((reply) => {
              const replyItem = document.createElement("div");
              replyItem.classList.add("comment-item", "reply-comment-item");
              replyItem.dataset.commentId = reply.id;

              const isReplyLiked = commentLikes.hasOwnProperty(reply.id)
                ? commentLikes[reply.id]
                : false;
              const replyLikeIconSrc = isReplyLiked
                ? "./icons/heart-blue.png"
                : "./icons/heart-gray.png";

              replyItem.innerHTML = `
  <img src="./icons/point.png" alt="ÎãµÍ∏Ä ÌôîÏÇ¥Ìëú" class="reply-arrow-image">
  <div class="profile-img-small">
    <img src="./icons/profile.png" alt="ÌîÑÎ°úÌïÑ" />
  </div>
  <div class="comment-content-area">
    <div class="comment-meta">
      <div class="user-info">
        <span class="comment-author">${reply.author}</span>
      </div>
      <button class="comment-like-button" data-comment-id="${reply.id}">
        <img src="${replyLikeIconSrc}" alt="Ï¢ãÏïÑÏöî" class="comment-like-icon" />
        <span class="comment-like-count">${reply.likes || 0}</span>
      </button>
    </div>
    <div class="comment-text">${reply.text.replace(/\n/g, "<br>")}</div>
    <div class="comment-info-actions">
      <span class="comment-date">${reply.date}</span>
      <button class="reply-button" data-comment-id="${
        reply.id
      }">ÎãµÍ∏ÄÎã¨Í∏∞</button>
    </div>
  </div>
`;

              commentGroup.appendChild(replyItem);
            });

          // üîµ 4. Ï†ÑÏ≤¥ comment-group Ï∂îÍ∞Ä
          commentsList.appendChild(commentGroup);
        });

        attachCommentEventListeners();
      }

      function attachCommentEventListeners() {
        document.querySelectorAll(".comment-like-button").forEach((button) => {
          button.onclick = null;
          button.addEventListener("click", function () {
            const commentId = parseInt(this.dataset.commentId);
            const isCurrentlyLiked = commentLikes.hasOwnProperty(commentId)
              ? commentLikes[commentId]
              : false;

            commentLikes[commentId] = !isCurrentlyLiked;

            const likeCountSpan = this.querySelector(".comment-like-count");
            const likeIconImg = this.querySelector(".comment-like-icon");

            const comment = currentPost.comments.find(
              (c) => c.id === commentId
            );
            if (comment) {
              if (commentLikes[commentId]) {
                comment.likes = (comment.likes || 0) + 1;
                likeIconImg.src = "./icons/heart-blue.png";
              } else {
                comment.likes = Math.max(0, (comment.likes || 0) - 1);
                likeIconImg.src = "./icons/heart-gray.png";
              }
              likeCountSpan.innerText = comment.likes;
            }
          });
        });

        document.querySelectorAll(".reply-button").forEach((button) => {
          button.onclick = null;
          button.addEventListener("click", function () {
            const parentCommentItem = this.closest(".comment-item");
            const commentId = parentCommentItem.dataset.commentId;

            const existingReplyArea =
              document.querySelector(".reply-input-area");
            if (existingReplyArea) {
              existingReplyArea.remove();
            }

            const replyInputArea = document.createElement("div");
            replyInputArea.classList.add("reply-input-area");
            replyInputArea.innerHTML = `
              <div class="profile-img-small">
                <img id="myReplyProfileImage" src="./icons/profile.png" alt="ÎÇ¥ ÌîÑÎ°úÌïÑ" />
              </div>
              <div class="reply-input-content">
                <input type="text" placeholder="ÎãµÍ∏ÄÏùÑ ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî..." data-parent-comment-id="${commentId}" />
                <div class="reply-buttons">
                  <button class="cancel-reply">Ï∑®ÏÜå</button>
                  <button class="submit-reply">Îì±Î°ù</button>
                </div>
              </div>
            `;

            // Insert reply input area right after the comment group or reply item
            // Find the correct insertion point: either the parent's commentGroup or the replyItem itself
            const targetElement =
              parentCommentItem.closest(".comment-group") || parentCommentItem;
            targetElement.after(replyInputArea);

            const myProfileImageReply = replyInputArea.querySelector(
              "#myReplyProfileImage"
            );
            const isLoggedIn = true;
            if (isLoggedIn) {
              myProfileImageReply.src = "./user/profile123.jpg";
            } else {
              myProfileImageReply.src = "./icons/profile.png";
            }

            const submitReplyButton =
              replyInputArea.querySelector(".submit-reply");
            const cancelReplyButton =
              replyInputArea.querySelector(".cancel-reply");
            const replyInputField = replyInputArea.querySelector("input");

            submitReplyButton.addEventListener("click", () => {
              const replyText = replyInputField.value.trim();
              if (replyText) {
                const now = new Date();
                const dateString = `${now.getFullYear()}ÎÖÑ ${
                  now.getMonth() + 1
                }Ïõî ${now.getDate()}Ïùº ${now.getHours()}:${now
                  .getMinutes()
                  .toString()
                  .padStart(2, "0")}`;

                const newCommentId = Date.now();
                const newReply = {
                  id: newCommentId,
                  author: currentUserName,
                  text: replyText,
                  date: dateString,
                  likes: 0,
                  parentId: parseInt(commentId),
                };

                currentPost.comments.push(newReply);
                renderComments(currentPost.comments);
                updateActionCounts(currentPost);
              }
              replyInputArea.remove();
            });

            cancelReplyButton.addEventListener("click", () => {
              replyInputArea.remove();
            });

            replyInputField.focus();
          });
        });
      }

      if (postData[id]) {
        currentPost = postData[id];
        document.getElementById("post-title").innerText = currentPost.title;
        document.getElementById(
          "post-writer"
        ).innerText = `${currentPost.writer}`;
        document.getElementById("post-date").innerText = `${currentPost.date}`;
        document.getElementById("post-content").innerHTML =
          currentPost.content.replace(/\n/g, "<br>");

        const postTypeElement = document.getElementById("post-type");
        const postTypeLinkElement = document.getElementById("post-type-link");

        const categoryName = currentPost.category || "ÏµúÏã†Í∏Ä";
        postTypeElement.innerText = categoryName;

        postTypeLinkElement.href = `community.html?category=${encodeURIComponent(
          categoryName
        )}`;

        updateActionCounts(currentPost);
        renderComments(currentPost.comments);

        let isPostLiked = false;
        const likeButton = document.getElementById("like-button");
        const likeIcon = document.getElementById("like-icon");

        likeButton.addEventListener("click", () => {
          if (!isPostLiked) {
            likeIcon.src = "./icons/heart-blue.png";
            currentPost.likes++;
            isPostLiked = true;
          } else {
            likeIcon.src = "./icons/heart-gray.png";
            currentPost.likes--;
            isPostLiked = false;
          }
          document.getElementById("like-count").innerText = currentPost.likes;
        });

        const bookmarkButton = document.getElementById("bookmark-button");
        const bookmarkIcon = document.getElementById("bookmark-icon");
        let isBookmarked = false;

        bookmarkIcon.src = "./icons/saved-white.png";

        if (bookmarkButton) {
          bookmarkButton.addEventListener("click", () => {
            if (!isBookmarked) {
              bookmarkIcon.src = "./icons/saved-blue.png";
              console.log("Í≤åÏãúÎ¨ºÏù¥ Ïä§ÌÅ¨Îû©ÎêòÏóàÏäµÎãàÎã§.");
              isBookmarked = true;
            } else {
              bookmarkIcon.src = "./icons/saved-white.png";
              console.log("Í≤åÏãúÎ¨º Ïä§ÌÅ¨Îû©Ïù¥ Ìï¥Ï†úÎêòÏóàÏäµÎãàÎã§.");
              isBookmarked = false;
            }
          });
        }

        const commentInput = document.getElementById("comment-input");
        const submitCommentButton = document.getElementById("submit-comment");

        submitCommentButton.addEventListener("click", () => {
          const commentText = commentInput.value.trim();
          if (commentText) {
            const now = new Date();
            const dateString = `${now.getFullYear()}ÎÖÑ ${
              now.getMonth() + 1
            }Ïõî ${now.getDate()}Ïùº ${now.getHours()}:${now
              .getMinutes()
              .toString()
              .padStart(2, "0")}`;

            const newCommentId = Date.now();
            const newComment = {
              id: newCommentId,
              author: currentUserName,
              text: commentText,
              date: dateString,
              likes: 0,
              parentId: null,
            };

            currentPost.comments.push(newComment);
            renderComments(currentPost.comments);
            updateActionCounts(currentPost);
            commentInput.value = "";
          }
        });
      } else {
        document.getElementById("post-title").innerText =
          "Í≤åÏãúÎ¨ºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.";
        document.getElementById("post-writer").innerText = "";
        document.getElementById("post-date").innerText = "";
        document.getElementById("post-content").innerText =
          "Ï°¥Ïû¨ÌïòÏßÄ ÏïäÎäî Í≤åÏãúÎ¨º IDÏûÖÎãàÎã§.";
        document.getElementById("post-type").innerText = "Ïò§Î•ò";
        document.getElementById("post-type-link").href = "#";
      }

      const isLoggedIn = true;
      const profileImageHeader = document.getElementById("profileImage");
      const myProfileImageComment = document.getElementById("myProfileImage");

      if (isLoggedIn) {
        profileImageHeader.src = "./user/profile123.jpg";
        myProfileImageComment.src = "./user/profile123.jpg";
      } else {
        profileImageHeader.src = "./icons/profile.png";
        myProfileImageComment.src = "./icons/profile.png";
      }

      if (!id) {
        window.history.pushState({}, "", "?id=1");
        location.reload();
      }

      const menuList = document.getElementById("menu-list");
      const currentCategory = currentPost ? currentPost.category : null;

      if (currentCategory) {
        Array.from(menuList.children).forEach((item) => {
          item.classList.remove("active");
          const icon = item.querySelector("img");
          if (icon) {
            icon.src = icon.src.replace("-blue.png", "-gray.png");
          }
          if (item.dataset.title === currentCategory) {
            item.classList.add("active");
            if (icon) {
              icon.src = icon.src.replace("-gray.png", "-blue.png");
            }
          }
        });
      }
    </script>
  </body>
</html>
