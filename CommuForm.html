<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ìê²©ì¦ ì„ íƒ</title>
    <style>
      body {
        margin: 0;
        font-family: "Pretendard", Arial, sans-serif;
        background: linear-gradient(to bottom right, #eaf6ff, #ffffff);
        overflow-x: hidden;
        overflow-y: hidden; /* âœ… ì¶”ê°€: ìŠ¤í¬ë¡¤ ë°©ì§€ */
        min-height: 100vh;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 40px;
      }

      .logo {
        height: 52px;
      }

      .nav-menu {
        display: flex;
        gap: 2px;
        align-items: center;
        font-weight: 500;
        font-size: 18px;
        color: #1e1e1e;
      }

      .nav-menu span,
      .nav-menu .profile-icon {
        padding: 0 16px;
        position: relative;
        display: flex;
        align-items: center;
      }

      .nav-menu span:not(:first-child)::before,
      .nav-menu .profile-icon::before {
        content: "";
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 1px;
        height: 24px;
        background-color: #ccc;
      }

      .top-message {
        display: none;
        padding: 30px 60px 0 60px;
        font-size: 24px;
        font-weight: 500;
        color: #000000;
        line-height: 1.6;
      }

      .top-message strong {
        color: #007aff;
      }

      .main-wrapper {
        display: flex;
        justify-content: center;
        gap: 40px;
        padding: 40px 40px 60px;
      }

      .left-panel {
        background: linear-gradient(180deg, #f8fbfe 0%, #f1f6fa 100%);
        border-radius: 20px;
        padding: 40px;
        width: 1151px;
        min-height: 400px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        transition: height 0.3s ease;
      }

      .intro-box {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        text-align: center;
        gap: 20px;
      }

      .intro-box img {
        width: 120px;
      }

      .speech {
        background: #fff;
        padding: 24px;
        border-radius: 15px;
        font-size: 30px;
        font-weight: 400;
        line-height: 1.6;
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.05);
      }

      .community-list {
        display: none;
        flex-direction: column;
        gap: 30px;
      }

      .community-box {
        background: #fff;
        border-radius: 10px;
        padding: 24px;
        box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.1);
      }

      .community-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 20px;
        font-weight: 600;
        color: #222;
        margin-bottom: 12px;
      }

      .community-title {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 36px;
        font-weight: 600;
      }

      .community-posts {
        font-size: 20px;
        font-weight: 400;
        line-height: 1.5;
        color: #444;
        margin-left: 34px;
      }

      .exam-selector {
        background: #f8fafd;
        border-radius: 20px;
        padding: 30px;
        width: 480px;
        height: 930px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        overflow-y: auto;
      }

      .exam-selector h2 {
        font-size: 24px;
        font-weight: 700;
        color: #1e3a8a;
        margin-bottom: 4px;
      }

      .exam-selector small {
        display: block;
        font-size: 16px;
        margin-bottom: 20px;
        color: #666;
      }

      details {
        margin-top: 10px;
        border-radius: 12px;
        overflow: hidden;
        background: #ffffff;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        border-left: 8px solid #007aff;
      }

      summary {
        font-size: 18px;
        font-weight: 600;
        background: #ffffff;
        padding: 16px 20px;
        cursor: pointer;
        list-style: none;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      summary::-webkit-details-marker {
        display: none;
      }

      summary::after {
        content: "â–¾";
        font-size: 16px;
        color: #007aff;
      }

      ul {
        list-style: none;
        padding: 0 20px 10px 20px;
        margin: 0;
      }

      li {
        padding: 10px;
        border-radius: 8px;
        transition: background 0.2s;
        display: flex;
        align-items: center;
      }

      li:hover {
        background-color: #f0f7ff;
      }

      input[type="checkbox"] {
        accent-color: #007aff;
        margin-right: 8px;
      }

      .community-header a,
      .community-posts a {
        color: #444;
        text-decoration: none;
        display: block;
        margin-bottom: 4px;
      }

      .community-posts a:last-child {
        margin-bottom: 0;
      }

      .community-header a:hover,
      .community-posts a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <header>
      <img src="tutti.png" alt="Tutti Logo" class="logo" />
      <div class="nav-menu">
        <span onclick="window.location.reload()">í™ˆ</span>
        <span onclick="alert('ì•Œë¦¼ ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.')">ì•Œë¦¼</span>
        <span class="profile-icon">
          <img src="icons/profile.png" alt="profile" width="37" />
        </span>
      </div>
    </header>

    <div class="top-message" id="top-message">
      <p>
        <strong>â€œì‚¼ì‚¼ì˜¥ìˆ˜â€</strong> ë‹˜ì˜ ë²„í‚·ë¦¬ìŠ¤íŠ¸ê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!<br />
        ì•ìœ¼ë¡œì˜ ì‹œê°„, ë‹¹ì‹ ì´ ì£¼ì¸ê³µì´ì—ìš”.
      </p>
    </div>

    <div class="main-wrapper">
      <div class="left-panel" id="left-panel">
        <div class="intro-box" id="intro-box">
          <img src="icons/profile.png" alt="user" />
          <div class="speech">
            <strong>â€œì‚¼ì‚¼ì˜¥ìˆ˜â€</strong>ë‹˜, ì•„ì§ ì°¸ì—¬í•œ ì»¤ë®¤ë‹ˆí‹°ê°€ ì—†ìŠµë‹ˆë‹¤.<br />
            ê´€ì‹¬ ìˆëŠ” ìê²©ì¦ì„ ì„ íƒí•´, í•¨ê»˜ ê³µë¶€í•  ì¹œêµ¬ë“¤ì„ ë§Œë‚˜ë³´ì„¸ìš”!
          </div>
        </div>

        <div class="community-list" id="community-list"></div>
      </div>

      <div class="exam-selector">
        <h2>âœ” ê³µë¶€í•  ìê²©ì¦ì„ ì„ íƒí•´ì£¼ì„¸ìš”!</h2>
        <small>ìê²©ì¦ì€ 3ê°œê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆì–´ìš”.</small>
        <div id="exam-container"></div>
      </div>
    </div>

    <script>
      const mockExamData = [
        { category: "ì–´í•™", exams: ["TOEIC", "TOEFL", "OPIC"] },
        {
          category: "ITÂ·ì •ë³´í†µì‹ ",
          exams: ["ì •ë³´ì²˜ë¦¬ê¸°ì‚¬", "ì»´í“¨í„°í™œìš©ëŠ¥ë ¥", "SQLD", "GTQ"],
        },
        {
          category: "ê²½ì˜Â·ì‚¬ë¬´Â·ê¸ˆìœµ",
          exams: ["íšŒê³„ê´€ë¦¬", "ì „ì‚°ì„¸ë¬´", "ERPì •ë³´ê´€ë¦¬ì‚¬"],
        },
        {
          category: "êµìœ¡Â·ì‚¬íšŒë³µì§€Â·ìƒë‹´",
          exams: ["ë³´ìœ¡êµì‚¬", "ì‚¬íšŒë³µì§€ì‚¬", "ì²­ì†Œë…„ìƒë‹´ì‚¬"],
        },
        {
          category: "ë””ìì¸Â·ë¬¸í™”Â·ë¯¸ë””ì–´",
          exams: ["GTQ", "ë©€í‹°ë¯¸ë””ì–´ì½˜í…ì¸ ì œì‘ì „ë¬¸ê°€"],
        },
      ];

      document.addEventListener("DOMContentLoaded", () => {
        renderCategories(mockExamData);
      });

      function renderCategories(categories) {
        const container = document.getElementById("exam-container");
        const communityList = document.getElementById("community-list");
        const introBox = document.getElementById("intro-box");
        const topMessage = document.getElementById("top-message");
        const leftPanel = document.getElementById("left-panel");

        container.innerHTML = "";
        let selected = JSON.parse(localStorage.getItem("selectedExams")) || [];

        categories.forEach((cat) => {
          const details = document.createElement("details");
          const summary = document.createElement("summary");
          summary.textContent = cat.category;
          details.appendChild(summary);

          const ul = document.createElement("ul");

          cat.exams.forEach((exam) => {
            const li = document.createElement("li");
            const label = document.createElement("label");
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.value = exam;

            if (selected.includes(exam)) {
              checkbox.checked = true;
            }

            checkbox.addEventListener("change", () => {
              if (checkbox.checked) {
                if (selected.length >= 3) {
                  checkbox.checked = false;
                  alert("ìµœëŒ€ 3ê°œê¹Œì§€ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                } else {
                  selected.push(exam);
                }
              } else {
                selected = selected.filter((e) => e !== exam);
              }

              localStorage.setItem("selectedExams", JSON.stringify(selected));
              updateDisabling();
              updateCommunityUI();
            });

            label.appendChild(checkbox);
            label.append(" " + exam);
            li.appendChild(label);
            ul.appendChild(li);
          });

          details.appendChild(ul);
          container.appendChild(details);
        });

        function updateDisabling() {
          const allCheckboxes = document.querySelectorAll(
            "input[type=checkbox]"
          );
          allCheckboxes.forEach((cb) => {
            if (!cb.checked && selected.length >= 3) {
              cb.disabled = true;
            } else {
              cb.disabled = false;
            }
          });
        }

        function updateCommunityUI() {
          const selectedCount = selected.length;

          if (selectedCount > 0) {
            introBox.style.display = "none";
            communityList.style.display = "flex";
            topMessage.style.display = "block";
            communityList.innerHTML = "";

            selected.forEach((exam) => {
              const box = document.createElement("div");
              box.className = "community-box";
              box.innerHTML = `
                <div class="community-header">
                  <a href="/community/${encodeURIComponent(exam)}">
                    <div class="community-title">
                       <img src="icons/award.png" alt="ğŸ“¢" width="42" height="40" />

                      ${exam} ì»¤ë®¤ë‹ˆí‹°
                    </div>
                  </a>
                  <span style="font-size: 14px; color: #888;">ğŸ“… 2025.06.24</span>
                </div>
                <div class="community-posts">
                  <a href="/community/${encodeURIComponent(
                    exam
                  )}/post1">ì´ ìê²©ì¦ì˜ ìµœì‹  ê³µë¶€ë²•ì€?</a>
                  <a href="/community/${encodeURIComponent(
                    exam
                  )}/post2">ì‹¤ì „ ëŒ€ë¹„ ê¿€íŒ ë‚˜ëˆ ìš”!</a>
                  <a href="/community/${encodeURIComponent(
                    exam
                  )}/post3">ì§ˆë¬¸ ìˆì–´ìš”~</a>
                </div>
              `;
              communityList.appendChild(box);
            });

            const heightPerItem = 170;
            const paddingOffset = 160;
            const totalHeight = selectedCount * heightPerItem + paddingOffset;
            leftPanel.style.height = `${totalHeight}px`;
          } else {
            introBox.style.display = "flex";
            communityList.style.display = "none";
            topMessage.style.display = "none";
            leftPanel.style.height = "680px";
          }
        }

        updateDisabling();
        updateCommunityUI();
      }
    </script>
  </body>
</html>
